# Changelog

## 0.7.2

### Изменения
- Исправлено предупреждение о неправильном использовании async_forward_entry_setup
- Восстановлена функциональность карточки Lovelace
- Улучшена стабильность регистрации компонентов

## 0.7.1

### Изменения
- Добавлен упрощенный сенсор для отображения статуса компонента
- Настроена правильная регистрация и выгрузка платформы сенсора
- Сохранена минимальная работоспособность без сложной функциональности
- Добавлен режим диагностики для выявления проблем

## 0.7.0

### Изменения
- Полностью упрощена инициализация интеграции для устранения проблем загрузки
- Временно отключена функциональность прокси-сервера и Lovelace-карточки
- Минимальная версия для отладки и восстановления работоспособности
- Скоро будет выпущена полная версия с восстановленной функциональностью

## 0.6.5

- Исправлена escape-последовательность в JavaScript коде
- Исправлено определение entity_id для сенсора
- Установлен фиксированный entity_id для совместимости с карточкой

## 0.6.4

- Исправлена проблема загрузки интеграции: добавлен отсутствующий вызов async_setup_card
- Улучшена обработка ошибок в JavaScript-карточке для работы даже при отсутствии сущности
- Добавлен дополнительный вывод в консоль для отладки проблем с карточкой

## 0.6.3

- Исправлены JavaScript-ошибки в карточке ESP32 Robot
- Добавлены проверки на null/undefined для предотвращения ошибок
- Улучшена обработка URL для iframe
- Добавлена поддержка нового формата атрибутов (host вместо ip_address)

## 0.6.2

- Исправлена проблема с пустым/отсутствующим хостом в конфигурации
- Добавлена проверка наличия хоста перед выполнением API запросов
- Улучшена обратная совместимость с существующими конфигурациями

## 0.6.1

- Исправлена проблема импорта ESP32RobotClient
- Добавлен резервный механизм для обеспечения совместимости
- Обновлен сенсор для работы с новым API клиентом
- Улучшена обработка отсутствия объекта hass при создании сессии

## 0.6.0

- Добавлен полноценный API клиент (ESP32RobotClient) с поддержкой аутентификации
- Улучшен конфигурационный поток для поддержки имени пользователя и пароля
- Добавлена обратная совместимость для существующих установок

## 0.5.5

- Исправлены предупреждения SyntaxWarning о некорректных escape-последовательностях
- Обновлен метод регистрации статических файлов для совместимости с будущими версиями Home Assistant
- Улучшена работа перехватчика JavaScript-запросов

## 0.5.4

- Исправлена проблема с авторизацией при прямом доступе к прокси
- Добавлен альтернативный URL доступа без авторизации через `/robot/{id}/`
- Улучшена обработка потоковых данных
- Расширена поддержка JavaScript API (EventSource, jQuery)

## 0.5.3

- Значительно улучшен прокси сервер для правильной работы с API эндпоинтами
- Добавлен JavaScript для перехвата и перенаправления всех динамических запросов
- Добавлена поддержка потоковых данных (видео-стриминг)
- Включена аутентификация по умолчанию для безопасности 

## 0.6.7

### Улучшения
- Добавлено детальное логирование в API-клиент для отслеживания проблем соединения
- Улучшена отладочная информация при ошибках с трассировкой стека
- Добавлена дополнительная обработка ошибок JSON при получении ответов от робота

## 0.6.6

### Улучшения
- Добавлено подробное логирование в процессе инициализации для лучшей отладки
- Улучшена обработка ошибок для предотвращения падения Home Assistant при проблемах с интеграцией
- Упрощена инициализация интеграции
- Добавлены явные зависимости от модулей frontend и http
- Исправлены отсутствующие импорты ROOT_PATH и ESP32RobotDirectProxyView 

## 0.6.8

### Исправления
- Исправлена ошибка `ESP32RobotDirectProxyView.__init__() missing 1 required positional argument: 'proxy_view'`
- Улучшена инициализация прокси-сервера
- Оптимизирована регистрация прямого прокси-обработчика 

## 0.6.9

### Исправления
- Исправлен импорт ESP32RobotProxyView для корректной инициализации
- Устранен конфликт при создании прокси-сервера
- Исправлено использование правильного ключа для прокси в async_unload_entry
- Улучшена стабильность регистрации и удаления роботов в прокси 