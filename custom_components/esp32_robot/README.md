# ESP32 Robot для Home Assistant

Интеграция ESP32 Robot для Home Assistant позволяет управлять роботом на базе ESP32 через веб-интерфейс и добавляет сенсоры и элементы управления.

## Функции

- Отображение статуса робота
- Управление движением через интерфейс Home Assistant
- Встроенный прокси-сервер для доступа к веб-интерфейсу робота из внешних сетей
- Поддержка авторизации для безопасного доступа
- Опция прямого доступа без авторизации для специальных случаев

## Установка

### HACS

1. Откройте HACS
2. Перейдите в "Integrations"
3. Нажмите "..."
4. Выберите "Custom repositories"
5. Добавьте репозиторий: `positron96/hass-esp32-robot`
6. Выберите категорию "Integration"
7. Нажмите "ADD"
8. Найдите "ESP32 Robot" и установите его

### Вручную

1. Скопируйте папку `custom_components/esp32_robot` в вашу директорию `custom_components`
2. Перезапустите Home Assistant

## Добавление интеграции

1. Перейдите в "Configuration" -> "Integrations"
2. Нажмите "+" и найдите "ESP32 Robot"
3. Введите IP-адрес вашего робота и другие настройки
4. Нажмите "Submit"

## Использование

После добавления интеграции вы можете:

1. Добавить карточку ESP32 Robot на вашу панель инструментов
2. Управлять роботом через веб-интерфейс в iframe
3. Использовать сервисы для программного управления роботом

## Прокси-сервер

Интеграция включает встроенный прокси-сервер, который позволяет получить доступ к веб-интерфейсу робота из внешних сетей. Это полезно, когда ваш Home Assistant доступен из интернета, а сам робот находится только в локальной сети.

### Как это работает

1. Интеграция автоматически регистрирует робота в прокси-сервере
2. Карточка ESP32 Robot использует URL прокси для отображения веб-интерфейса
3. Все запросы проходят через Home Assistant с проверкой аутентификации
4. JavaScript и другие ресурсы автоматически перенаправляются через прокси

### Опции доступа

Доступно два способа доступа к роботу через прокси:

1. **Стандартный URL с аутентификацией** (рекомендуется):
   ```
   /api/esp32_robot_proxy/{id}/
   ```
   Требует авторизации в Home Assistant, обеспечивает безопасность.

2. **Прямой URL без аутентификации**:
   ```
   /robot/{id}/
   ```
   Не требует авторизации, удобно для интеграции с другими системами, но менее безопасно.

Вы можете выбрать предпочтительный метод доступа в настройках карточки ESP32 Robot.

## Ссылки

- [Документация](https://github.com/positron96/hass-esp32-robot)
- [Отслеживание проблем](https://github.com/positron96/hass-esp32-robot/issues)
- [Список изменений](https://github.com/positron96/hass-esp32-robot/blob/main/CHANGELOG.md) 